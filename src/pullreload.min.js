(function(e){var t=false;var n=false;var r=0;var o=20;var i=true;var s=true;function u(e){if(e.pageY===undefined&&e.touches!==undefined){if(e.touches.length<=0){return false}e.pageY=e.touches[e.touches.length-1].pageY}return e.pageY}function a(e){var o=document.body.scrollTop;if(o===0){s=true;document.addEventListener("mousemove",c);document.addEventListener("touchmove",c,{passive:false});document.addEventListener("mouseup",p);document.addEventListener("touchend",p)}else{s=false;document.removeEventListener("mousemove",c);document.removeEventListener("touchmove",c,{passive:false});document.removeEventListener("mouseup",p);document.removeEventListener("touchend",p);return}if(!i){return}t=true;n=false;r=u(e)}function c(e){if(i&&s&&t){e.stopImmediatePropagation();var a=Math.floor(u(e)-r);if(a>=0){e.preventDefault();if(a>o){n=true;ptr.innerHTML="loading..."}else{n=false;ptr.innerHTML="..."}var c=41-a;ptr.style.marginTop="-"+(c>0?c:0)+"px"}}}function p(){if(!i||!s){return}if(n){i=false;ptr.style.marginTop="0px";try{d().then(function(e){console.log(e);i=true;ptr.style.marginTop="-41px";ptr.innerHTML="..."})}catch(e){setTimeout(function(){i=true;ptr.style.marginTop="-41px";ptr.innerHTML="..."},1e3)}}else{ptr.style.marginTop="-41px"}t=false;n=false}var d;e.pullReload=function(e){try{this.content=document.getElementById(e.content);var t=e.ptr||"ptr";this.ptr=document.getElementById(t);var n={padding:"0px",margin:"0px",display:"block",height:"40px",border:"1px solid #000",borderTop:"0px",borderLeft:"0px",borderRight:"0px",textAlign:"center",lineHeight:"40px",fontSize:"30px",marginTop:"-41px"};for(var r in n){this.ptr.style[r]=n[r]}d=e.callback||function(){return;new Promise(function(e,t){setTimeout(function(){e("no refresh")},1e3)})};this.start=function(){this.content.addEventListener("mousedown",a);this.content.addEventListener("touchstart",a)};this.remove=function(){this.content.removeEventListener("mousedown",a);this.content.removeEventListener("touchstart",a)};return this}catch(e){console.log(e);console.log("请在浏览器环境下运行")}}})(window);